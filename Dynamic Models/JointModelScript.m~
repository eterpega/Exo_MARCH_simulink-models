%This script runs the SimpleJointModel.slx simulink model
%One can directly change the value of some important parameters

clc
close all
clear all

%define model and open
model='SimpleJointModel';
open_system(model);

%Define and set important parameters
initial_load='50'; %in kg
initial_angle='45'; %in degrees
bone_dimensions='[0.012 0.5 0.045]' ; %[W L H]
bone_density='2700'; %in kg/m^3

%Use get param to find the names of the parameters in a particular block
%get_param([model '/BlockNameHere'],'dialogparameters')
set_param([model '/initial_angle'],'RotationAngle',initial_angle);
set_param([model '/Inertia'],'Mass',initial_load);
set_param([model '/Solid'],'BrickDimensions',bone_dimensions);
set_param([model '/Solid'],'Density',bone_density);

%Run model
simout =sim(model);

%Plot joint torque and angular acceleration
figure;
plot(joint_torque);
title('Joint Torque in N.m')
figure
plot(joint_acceleration);
title('Joint Acceleration in rad/s^2');